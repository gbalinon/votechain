(function(){var t={4519:function(t,n,e){"use strict";var a=e(6848),i=function(){var t=this,n=t._self._c;return n("div",{attrs:{id:"app"}},[n("VoteChain")],1)},s=[],o=function(){var t=this,n=t._self._c;return n("div",[n("div",{staticClass:"w3-sidebar w3-bar-block w3-black w3-card",staticStyle:{width:"130px"}},[n("h5",{staticClass:"w3-bar-item"},[t._v("VoteChain")]),n("button",{staticClass:"w3-bar-item w3-button tablink",attrs:{id:"btnHome"},on:{click:function(n){return t.openLink("btnHome","home")}}},[t._v("Home")]),n("button",{staticClass:"w3-bar-item w3-button tablink",attrs:{id:"btnVote"},on:{click:function(n){return t.openLink("btnVote","vote")}}},[t._v("Vote")]),n("button",{staticClass:"w3-bar-item w3-button tablink",attrs:{id:"btnResults"},on:{click:function(n){return t.openLink("btnResults","results")}}},[t._v("Results")]),n("button",{staticClass:"w3-bar-item w3-button tablink",attrs:{id:"btnAccount"},on:{click:function(n){return t.openLink("btnAccount","account")}}},[t._v("Account")])]),n("div",{staticClass:"w3-container",attrs:{id:"contents"}},[t._m(0),t.errorMessage.length>0?n("div",{staticClass:"w3-panel w3-pale-red w3-center w3-card-4 w3-padding"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e(),n("div",{attrs:{id:"tabs"}},[n("div",{staticClass:"w3-container tab w3-animate-left w3-center",staticStyle:{display:"block"},attrs:{id:"home"}},[n("h3",[t._v("Welcome "),n("code",[t._v(t._s(t.accounts[0]))])]),t.accounts.length>0?n("div",{staticClass:"w3-margin-top"},[n("div",{staticClass:"w3-center"},[t.hasVoted?n("div",{staticClass:"w3-panel w3-pale-green w3-padding-large"},[t._v("Congratulations, your vote has been casted and counted.")]):n("div",[t.votingEnabled?n("div",{staticClass:"w3-center w3-panel w3-padding-large w3-pale-blue"},[n("h4",[t._v("Voting has been opened and you are eligible to vote.")]),n("div",{staticClass:"w3-padding"},[n("button",{staticClass:"w3-button w3-blue w3-round",on:{click:function(n){return t.openLink("btnVote","vote")}}},[t._v("Click here to Vote")])])]):n("div",{staticClass:"w3-panel w3-padding w3-pale-yellow"},[n("h4",[t._v("You are eligible to vote but voting is NOT yet open.")]),t.isChairperson?n("div",{staticClass:"w3-panel"},[n("button",{staticClass:"w3-button w3-green w3-round",on:{click:function(n){return t.openVoting()}}},[t._v("Open Voting")])]):n("div",{staticClass:"w3-padding"},[t._v("Please contact the chairperson and request to open the voting.")])])])])]):n("div",{staticClass:"w3-center w3-panel w3-padding-large w3-pale-blue"},[n("div",{staticClass:"w3-padding"},[t._v(" In order to vote and/or view the results, you need to connect your metamask amount. Please don't forget to disconnect after you have voted. ")]),n("div",{staticClass:"w3-padding"},[n("button",{staticClass:"w3-button w3-green w3-round",on:{click:function(n){return t.connectToMetamask()}}},[t._v("Connect your Metamask Account")])])])]),n("div",{staticClass:"w3-container tab w3-animate-left w3-center",staticStyle:{display:"none"},attrs:{id:"vote"}},[t.accounts.length>0?n("h2",{staticClass:"w3-panel w3-center"},[t._v("Candidates")]):n("div",{staticClass:"w3-padding"},[n("button",{staticClass:"w3-button w3-green w3-round",on:{click:function(n){return t.connectToMetamask()}}},[t._v("Connect your Metamask Account")])]),n("div",{staticClass:"w3-row-padding w3-center w3-margin-top"},t._l(t.candidates,(function(e,a){return n("div",{key:a,staticClass:"w3-quarter"},[n("div",{staticClass:"w3-card w3-container",staticStyle:{"min-height":"260px"}},[n("h3",[t._v(t._s(e.name))]),n("img",{attrs:{src:e.imageUrl,height:"120"}}),n("div",{staticClass:"w3-panel"},[!t.hasVoted&&t.votingEnabled?n("button",{staticClass:"w3-button w3-block w3-green",on:{click:function(n){return t.confirmVote(a)}}},[t._v("Vote")]):t._e()])])])})),0)]),n("div",{staticClass:"w3-container tab w3-animate-left w3-center",staticStyle:{display:"none"},attrs:{id:"results"}},[t.accounts.length>0?n("h2",{staticClass:"w3-panel w3-center"},[t._v("Results")]):n("div",{staticClass:"w3-padding"},[n("button",{staticClass:"w3-button w3-green w3-round",on:{click:function(n){return t.connectToMetamask()}}},[t._v("Connect your Metamask Account")])]),n("div",{staticClass:"w3-row-padding w3-center w3-margin-top"},t._l(t.candidates,(function(e,a){return n("div",{key:a,staticClass:"w3-quarter"},[n("div",{staticClass:"w3-card w3-container",staticStyle:{"min-height":"260px"}},[n("h3",[t._v(t._s(e.name)),e.isWinner?n("span",{staticClass:"w3-xlarge"},[n("sup",[t._v("ðŸ‘‘")])]):t._e()]),n("img",{attrs:{src:e.imageUrl,height:"120"}}),n("div",{staticClass:"w3-panel"},[t._v(" Votes: "),n("span",{staticClass:"w3-badge w3-green w3-large"},[t._v(t._s(e.voteCount))])])])])})),0)]),n("div",{staticClass:"w3-container tab w3-animate-left w3-center",staticStyle:{display:"none"},attrs:{id:"account"}},[n("div",{staticClass:"w3-panel w3-padding w3-margin-top"},[t.isChairperson?n("div",[n("div",{staticClass:"w3-card-4 w3-padding-large w3-margin"},[t._v("Leading Candidate: "+t._s(t.winner))]),n("div",{staticClass:"w3-card-4 w3-padding-large w3-margin"},[t._v("Number of Candidates: "+t._s(t.candidatesLength))]),n("div",{staticClass:"w3-card-4 w3-padding-large w3-margin"},[t._v("Voting Opened: "+t._s(t.votingEnabled))]),n("div",{staticClass:"w3-card-4 w3-padding-large w3-margin"},[t._v("Chairperson Address: "+t._s(t.chairpersonAddress))]),t.votingEnabled?n("div",{staticClass:"w3-panel"},[n("button",{staticClass:"w3-button w3-black w3-round w3-block",on:{click:function(n){return t.closeVoting()}}},[t._v("Close Voting")])]):n("div",{staticClass:"w3-panel"},[n("button",{staticClass:"w3-button w3-blue w3-round w3-block",on:{click:function(n){return t.openVoting()}}},[t._v("Open Voting")])])]):t._e(),n("div",{staticClass:"w3-panel"},[t.accounts.length>0?n("button",{staticClass:"w3-button w3-red w3-round w3-block",on:{click:function(n){return t.disconnect()}}},[t._v("Disconnect Metamask Account")]):n("button",{staticClass:"w3-button w3-green w3-round w3-block",on:{click:function(n){return t.connectToMetamask()}}},[t._v("Connect your Metamask Account")])])])])]),t._m(1)])])},r=[function(){var t=this,n=t._self._c;return n("header",{staticClass:"w3-container w3-padding",attrs:{id:"myHeader"}},[n("div",{staticClass:"w3-center"},[n("h1",{staticClass:"w3-xxxlarge w3-animate-left"},[t._v("Presidential Election")])])])},function(){var t=this,n=t._self._c;return n("footer",{staticClass:"w3-container w3-padding-16 w3-center"},[n("p",[t._v("Powered by "),n("a",{attrs:{href:"#"}},[t._v("VoteChain")]),t._v(" - a decentralized voting application built on blockchain.")])])}],c=(e(4114),e(2002)),l=e(8820),d=e(4345),u=JSON.parse('[{"inputs":[{"internalType":"bool","name":"_votingEnabled","type":"bool"}],"name":"setVotingState","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string[]","name":"_candidateNames","type":"string[]"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"uint256","name":"_candidate","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"candidates","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"voteCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"chairperson","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCandidatesLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getWinner","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"voters","outputs":[{"internalType":"bool","name":"voted","type":"bool"},{"internalType":"uint256","name":"vote","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"votingEnabled","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]'),p={data(){return{provider:null,contract:null,candidatesLength:0,candidates:[],errorMessage:"",accounts:[],balance:0,message:"",votingEnabled:!1,hasVoted:!1,chairperson:null,isChairperson:null,senderAddress:null,chairpersonAddress:null,winner:null}},methods:{createContractInstance(){this.contract=new c.NZ("0x4094FBfc9003550F6DE7178F24cC100cf284A583",u),this.contract=this.contract.connect(this.provider),this.getVotingStatus(),this.getVoterHasVoted(),this.getChairperson(),this.getWinner(),this.getCandidates()},async connectToMetamask(){this.provider=new l.j(window.ethereum),this.accounts=await this.provider.send("eth_requestAccounts",[]),this.getBalance(),this.createContractInstance()},async getCandidates(){this.candidatesLength=await this.contract.getCandidatesLength(),this.candidates=[];for(var t=0;t<this.candidatesLength;t++){var n=await this.contract.candidates(t),e=!1;e=this.winner==n.name;var a={name:n.name,voteCount:n.voteCount,imageUrl:"https://api.dicebear.com/9.x/croodles/svg?seed="+n.name.split(" ")[0],isWinner:e};this.candidates.push(a)}},async getVotingStatus(){this.votingEnabled=await this.contract.votingEnabled()},async getChairperson(){this.chairperson=await this.contract.chairperson();var t="";t=this.chairperson,this.chairpersonAddress=t.toUpperCase();var n=this.accounts[0];this.senderAddress=n.toUpperCase(),this.isChairperson=this.senderAddress==this.chairpersonAddress},async getVoterHasVoted(){var t=await this.contract.voters(this.accounts[0]);this.hasVoted=t.voted},async getWinner(){this.winner=await this.contract.getWinner()},disconnect(){this.accounts=[],this.balance=0,this.provider=null,this.contract=null,this.candidates=[],this.errorMessage="",this.hasVoted=!1,this.votingEnabled=!1,this.chairperson=null,this.candidatesLength=0,this.isChairperson=null},async addVote(t){var n=this.provider.getSigner(),e=this.contract.connect(n);try{var a=await e.vote(t);await a.wait(),await this.getVoterHasVoted(),await this.getWinner(),this.getCandidates(),this.errorMessage=""}catch(i){this.errorMessage=i.data.message}},async openVoting(){var t=this.provider.getSigner(),n=this.contract.connect(t);try{var e=await n.setVotingState(!0);await e.wait(),await this.getVotingStatus(),this.errorMessage=""}catch(a){this.errorMessage=a.data.message}},async closeVoting(){var t=this.provider.getSigner(),n=this.contract.connect(t);try{var e=await n.setVotingState(!1);await e.wait(),await this.getVotingStatus(),this.errorMessage=""}catch(a){this.errorMessage=a.data.message}},async getBalance(){var t=await this.provider.getBalance(this.accounts[0]);this.balance=d.ck(t)},openLink(t,n){var e,a,i;for(a=document.getElementsByClassName("tab"),e=0;e<a.length;e++)a[e].style.display="none";for(i=document.getElementsByClassName("tablink"),e=0;e<a.length;e++)i[e].className=i[e].className.replace(" w3-red","");document.getElementById(n).style.display="block",document.getElementById(t).className+=" w3-red"},confirmVote(t){confirm("Is that your final answer?")&&this.addVote(t)}}},w=p,h=e(1656),v=(0,h.A)(w,o,r,!1,null,"65fbefb0",null),g=v.exports,b={name:"App",components:{VoteChain:g}},m=b,y=(0,h.A)(m,i,s,!1,null,null,null),C=y.exports;a.Ay.config.productionTip=!1,new a.Ay({render:t=>t(C)}).$mount("#app")},7790:function(){}},n={};function e(a){var i=n[a];if(void 0!==i)return i.exports;var s=n[a]={id:a,loaded:!1,exports:{}};return t[a].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}e.m=t,function(){e.amdO={}}(),function(){var t=[];e.O=function(n,a,i,s){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],s=t[d][2];for(var r=!0,c=0;c<a.length;c++)(!1&s||o>=s)&&Object.keys(e.O).every((function(t){return e.O[t](a[c])}))?a.splice(c--,1):(r=!1,s<o&&(o=s));if(r){t.splice(d--,1);var l=i();void 0!==l&&(n=l)}}return n}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[a,i,s]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){e.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};e.O.j=function(n){return 0===t[n]};var n=function(n,a){var i,s,o=a[0],r=a[1],c=a[2],l=0;if(o.some((function(n){return 0!==t[n]}))){for(i in r)e.o(r,i)&&(e.m[i]=r[i]);if(c)var d=c(e)}for(n&&n(a);l<o.length;l++)s=o[l],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return e.O(d)},a=self["webpackChunkVoteChain"]=self["webpackChunkVoteChain"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=e.O(void 0,[504],(function(){return e(4519)}));a=e.O(a)})();
//# sourceMappingURL=app.d7dd5d2c.js.map